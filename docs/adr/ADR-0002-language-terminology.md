# ADR-0002: Термінологія для багато мовної підтримки

## Статус
Прийнято

## Контекст
MOVA потребує підтримки розробки планів та маршрутів рідною мовою. Це включає:

- Локалізацію структурних ключів JSON
- Підтримку декількох мов (UA, DE, EN)
- Автоматичну трансляцію в канонічний формат
- Збереження зворотної сумісності

## Рішення

### Термінологія

**Мовний файл (Language file)** - JSON файл з локалізованими ключами
```json
{
  "версія": "3.3",
  "дії": [...]
}
```

**Канонічний файл (Canonical file)** - англійський JSON, що проходить валідацію
```json
{
  "mova_version": "3.3.0",
  "actions": [...]
}
```

**Лексикон (Lexicon)** - мапа локалізований_ключ → canonical_key
```json
{
  "версія": "mova_version",
  "дії": "actions"
}
```

**Allowlist** - перелік дозволених для трансляції ключів
```json
["версія", "дії", "тип", "повідомлення"]
```

**Бланк (Blank template)** - порожній шаблон з плейсхолдерами
```json
{
  "повідомлення": "<ВАШЕ_ПОВІДОМЛЕННЯ>"
}
```

### Правила найменування

#### Файли лексиконів
- `lexicon_<lang>.json` - основний лексикон
- `lexicon_<lang>_values.json` - лексикон значень (майбутнє)

#### Файли allowlist
- `allowlist_structural_<lang>.json` - структурні ключі
- `allowlist_values_<lang>.json` - значення (майбутнє)

#### Директорії шаблонів
- `templates/<lang>/` - мовні файли розробника
- `templates/canonical/` - згенеровані канонічні файли
- `templates/blank/<lang>/` - порожні бланки

#### Розширення файлів
- `.json` - мовні файли
- `.canonical.json` - канонічні файли
- `.blank.json` - бланки з плейсхолдерами

### Правила трансляції

1. **Тільки структурні ключі** транслюються через лексикон
2. **Значення полів** залишаються мовними (повідомлення, назви файлів)
3. **Типи дій** транслюються окремо (type: "друк" → "print")
4. **Плейсхолдери** `<KEY>` замінюються при scaffold
5. **Коментарі** `$comment` ігноруються при трансляції

### Підтримувані мови

#### Українська (uk) - пріоритетна
- Повне покриття всіх канонічних ключів
- Використання у всіх прикладах
- Первинна мова для тестування

#### Німецька (de) - вторинна
- Базове покриття основних сценаріїв
- Можливе часткове покриття
- Попередження при відсутності ключів у CI

#### Інші мови (future)
- Англійська як канонічна
- Можливість додавання нових мов через лексикони

## Наслідки

### Позитивні
- Розробники можуть писати рідною мовою
- Автоматична трансляція гарантує сумісність
- Зворотна сумісність з існуючими файлами
- Можливість розширення на нові мови

### Негативні
- Додатковий шар складності
- Необхідність підтримки лексиконів
- Можливі конфлікти термінології

### Ризики
- Несумісність версій лексиконів
- Плутанина між ключами та значеннями
- Проблеми з пошуком та заміною

## Альтернативи

### 1. Тільки англійська
- Простий, але незручний для неангломовних розробників

### 2. Переклад значень
- Складніший, потребує більше ресурсів
- Проблеми з контекстом

### 3. Гібридний підхід
- Дозволити змішування мов
- Складніше валідація та підтримка

## Впровадження

### Фаза 1 (поточна)
- Тільки ключі, без значень
- UA та DE базова підтримка
- Мінімальні бланки

### Фаза 2 (майбутнє)
- Лексикони значень
- Розширені бланки
- UI редактор

### Фаза 3 (майбутнє)
- Автоматичний переклад
- Інтеграція з IDE
- Розширені мови

## Зміни

- **2024-01-XX**: Початковий варіант
- **2024-01-XX**: Додавання німецької підтримки
- **2024-01-XX**: Фіналізація термінології